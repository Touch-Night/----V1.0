脚本由_Smzh_制作并发布，B站id：https://space.bilibili.com/23115399
脚本只提供AI翻译服务，所有由本脚本制成的翻译内容，与脚本制作人无关，请各位遵守法律，合法翻译。
sakura模型相关声明：如果使用模型翻译并发布，请在最显眼的位置标注机翻！！！！！开发者对于滥用本模型造成的一切后果不负任何责任。

____________________________________________________________________________________________________________________
！！！！前置需求！！！！
脚本运行需要环境内有Python，如果没有，文件夹内有一个Python安装包，运行安装，注意必须在安装过程中勾选add to path选项。等待安装完成即可。
然后运行配置前置环境.bat
____________________________________________________________________________________________________________________

正常翻译流程：

===第一步===
运行：前置环境.bat
启动MTool。
将游戏导入。
然后在翻译页面导出手动翻译文件。文件名应该是：ManualTransFile.json
然后将其放置在脚本目录下。（至此MTool可以关闭了，游戏也可以关闭了）

===第二步===
运行：启动数据清理.bat
输入需要被翻译的主要语言（日语输入1，英语输入2），输入后回车。
将会开始自动清理。
清理完成后自动生成：清理后的数据.json
请务必打开然后观察内容是否正常，非需要翻译的文本内容如果依然出现在其中，可以自行删除。

===第三步===
启动Text Generation webui，确保api已经打开，然后加载模型：若需要翻译英文，选择qwen模型，若需要翻译日文，选择sakura模型。
然后运行：启动自动翻译.bat
输入需要被翻译的主要语言（日语输入1，英语输入2），输入后回车。
翻译将会自动进行。
此时Text Generation webui的后台窗口应该会连续出现post，说明正在翻译。
耐心等待翻译完成。（根据你需要翻译的内容长短，翻译时间可以从1h到12h不等，请耐心等待并保持系统稳定）
脚本运行完成后会自动输出：翻译完成.json，翻译错误.json，中断部分.json（最后两个文件不一定有）

===第四步===
若根目录出现翻译错误.json，将其打开，使用Text Generation webui的chat页面与模型聊天进行翻译，或者使用百度翻译等，进行手工翻译。
翻译完成后，请按照格式：
{
    "未翻译内容1": "翻译完成内容1",
    "未翻译内容2": "翻译完成内容2",
    "未翻译内容3": "翻译完成内容2"
}
将其与翻译完成.json合并
！！注意！！
只有一组{}，并且只有最后一行是没有逗号","结尾的

===第五步===
通过MTool的翻译页面手动选择翻译完成.json，将会自动导入翻译好的文本。
至此游戏汉化结束。

____________________________________________________________________________________________________________________

===可能存在的第六步===
如果出现api不稳定，导致的翻译失败，脚本将会自动跳出，并记录断点，然后自动生成文件夹：紧急弹出备份
紧急弹出备份内包含：
断点备份-翻译错误.json
断点备份-翻译完成.json
断点备份-中断部分.json

如果需要断点继续，请务必将 断点备份-翻译完成.json，与 断点备份-翻译错误.json，手动保存到非脚本目录下。
将 断点备份-中断部分.json 重命名为 清理后的数据.json。
将这个新的 清理后的数据.json 放置到脚本的更目录，替换原来的 清理后的数据.json
手动删除 紧急弹出备份 文件夹
最后重新运行：启动自动翻译.bat

===可能存在的第七步===
当你终于完成了所有翻译，并正常输出了：
翻译错误.json
翻译完成.json

你需要手动将：
断点备份-翻译错误.json  与  翻译错误.json    合并（注意格式）
断点备份-翻译完成.json  与  翻译完成.json    合并（注意格式）

然后回到第四步，进行手动汉化，最终导入Mtool。

____________________________________________________________________________________________________________________


文件格式介绍：

翻译完成.json内是翻译好的内容，具体格式：（注意只有最后一行是没有逗号","结尾的）
{
    "未翻译内容1": "翻译完成内容1",
    "未翻译内容2": "翻译完成内容2",
    "未翻译内容3": "翻译完成内容2"
}

断点备份-翻译完成.json是api报错前，所有翻译好的内容，具体格式（注意只有最后一行是没有逗号","结尾的）
{
    "未翻译内容1": "翻译完成内容1",
    "未翻译内容2": "翻译完成内容2",
    "未翻译内容3": "翻译完成内容2"
}

翻译错误.json内是模型翻译过程中发生了错误的文本。你可以通过TGW手动进行一次翻译，或者使用百度翻译等，手动翻译。翻译完成后请务必将其加入翻译完成.json文件中（需要注意格式，留心每一行最后的逗号“,”只有最后一行文本末尾是没有逗号的）具体格式：
{
    "未翻译内容1": "未翻译内容1",
    "未翻译内容2": "未翻译内容2",
    "未翻译内容3": "未翻译内容3"
}

断点备份-翻译错误.json是api报错前，模型翻译过程中发生了错误的文本。（需要注意格式，留心每一行最后的逗号“,”只有最后一行文本末尾是没有逗号的）具体格式：
{
    "未翻译内容1": "未翻译内容1",
    "未翻译内容2": "未翻译内容2",
    "未翻译内容3": "未翻译内容3"
}

断点备份-中断部分.json内是如果你的TGW的api调用出现了不稳定的情况，脚本会自动保存一份还未翻译的内容，方便沿着断点继续翻译。（需要注意格式，留心每一行最后的逗号“,”只有最后一行文本末尾是没有逗号的）具体格式：
{
    "未翻译内容1": "未翻译内容1",
    "未翻译内容2": "未翻译内容2",
    "未翻译内容3": "未翻译内容3"
}

——————————————————————————————————————————————————————————————
至此，教程基本结束。
——————————————————————————————————————————————————————————————